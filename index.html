<!DOCTYPE html>
<html>
<head>
	<title>Highcharts+PHP+Mysql生成饼状统计图</title>
	<link rel="stylesheet" type="text/css" href="http://www.sucaihuo.com/jquery/css/common.css" />
	<style type="text/css">
	.demo{margin:50px auto}
    .myclass{border:1px solid #000; background:#ccc; color:#fff}
</style>
</head>
<body>
	<div id="container" style="min-width:400px;height:400px"></div>
    <script type="text/javascript" src="http://www.sucaihuo.com/Public/js/other/jquery.js"></script>
    <script src="__APP__/Application/Test/Public/js/highcharts.js"></script>
    <script src="__APP__/Application/Test/Public/js/modules/exporting.js"></script>
    <script type="text/javascript">
    //data是json字符串$res = M('chart_pie')->field('title,pv')->select();
	// foreach ($res as $key => $row) {
	// 	$arr[] = [$row['title'],intval($row['pv'])];
	// }
    var data = {$data};
    	$(function () {
		    $('#container').highcharts({
		        chart: {
		        	renderTo: 'chart_pie', //饼状图关联html元素id值
		            plotBorderWidth: null,
		            defaultSeriesType: 'pie', //默认图表类型为饼状图
		            plotBackgroundColor: '#ffc', //设置图表区背景色
		            plotShadow: false   //设置阴影
		        },
		        title: {
		            text: '搜索引擎统计分析'  //图表标题
		        },
		        tooltip: {
		            headerFormat: '{series.name}<br>',
		            pointFormat: '{point.name}: <b>{point.percentage:.1f}%</b>'
		        },
		        credits: {
                        text: '右下角角标'
                  },
		        plotOptions: {
		            pie: {
		                allowPointSelect: true,
		                cursor: 'pointer',
		                dataLabels: {
		                    enabled: true,
		                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
		                    style: {
		                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
		                    }
		                }
		            }
		        },
		        series: [{
		            type: 'pie',
		            name: '浏览器访问量占比',
		            data: data
		        }]
		    });
		});
    </script>
</body>
</html>